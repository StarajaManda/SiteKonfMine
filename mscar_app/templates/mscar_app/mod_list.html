{% extends "mscar_app/base.html" %}
{% load static %}

{% block title %}Моды Minecraft - BlockMods{% endblock %}

{% block content %}
<div class="mods-grid">
    <div class="featured-section">
        <div class="section-header">
            <h2 class="section-title">
                <i class="fas fa-crown" style="color: #f59e0b;"></i>
                {% if request.GET.category %}Моды: {{ category_name }}{% else %}Все моды{% endif %}
            </h2>
            <span class="mods-count">Найдено: {{ mods|length }}</span>
        </div>
        
        <div class="featured-mods">
            {% for mod in mods %}
            <div class="mod-card">
                <div class="mod-header">
                    {% if mod.image %}
                        <img src="{{ mod.image.url }}" alt="{{ mod.title }}" class="mod-image">
                    {% else %}
                        <div class="mod-image-placeholder">
                            <i class="fas fa-cube fa-3x"></i>
                        </div>
                    {% endif %}
                    <span class="mod-badge">{{ mod.category.name }}</span>
                </div>
                <div class="mod-content">
                    <h3 class="mod-title">{{ mod.title }}</h3>
                    <div class="mod-author">
                        <i class="fas fa-user"></i>
                        {{ mod.author.username }}
                    </div>
                    <p class="mod-description">
                        {{ mod.description|truncatewords:20 }}
                    </p>
                    <div class="mod-stats">
                        <div class="rating">
                            <i class="fas fa-star star-icon"></i>
                            <span>{{ mod.average_rating }}</span>
                            <small>({{ mod.total_reviews }})</small>
                        </div>
                        <div class="downloads">
                            <i class="fas fa-download"></i>
                            <span>{{ mod.downloads }}+</span>
                        </div>
                    </div>
                    <div class="mod-version">
                        <small>Версия: {{ mod.current_version }}</small>
                    </div>
                    <div class="mod-actions">
                        <a href="{% url 'mscar_app:mod_detail' mod.id %}" class="action-btn primary-btn">
                            <i class="fas fa-info-circle"></i> Подробнее
                        </a>
                        <button class="action-btn secondary-btn bookmark-btn {% if mod.id in user_bookmarks %}active{% endif %}" 
                            onclick="toggleBookmark({{ mod.id }})"
                            {% if not user.is_authenticated %}disabled title="Войдите чтобы добавить в закладки"{% endif %}>
                                <i class="{% if mod.id in user_bookmarks %}fas{% else %}far{% endif %} fa-bookmark"></i>
                        </button>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="no-mods">
                <i class="fas fa-search fa-3x"></i>
                <h3>Моды не найдены</h3>
                <p>Попробуйте изменить параметры поиска</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}